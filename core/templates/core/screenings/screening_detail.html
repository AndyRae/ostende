{% extends "core/base.html" %}

{% block og:title %}{{ screening.film }} - {{ screening.venue }}, {{ screening.venue.city }}{% endblock og:title %}

{% block og:description %}{% endblock %}

{% block twitter:image %}{{ screening.film.image.url }}{% endblock %}

{% block title %}{{ screening.film }} - {{ screening.venue }}, {{ screening.venue.city }}{% endblock title %}

{% block banner %}
  <!-- <div class="banner">
    <picture>
      <img src="{{ screening.film.image.url }}" alt="">
    </picture>
    <div class="banner-content container">

    </div>
  </div> -->

  <div class="jumbotron mt-5 banner" style="background-image: url({{ screening.film.image.url }});">
    <h1 class="display-3 text-white font-weight-bold">{{ screening.film }}</h1>
    <p class="lead">An open source film season listing system, built with Python on Django.</p>
    <hr class="my-4">
    <p class="lead">
      <a class="btn btn-dark btn-lg mt-4" href="#" role="button">Learn more</a>
    </p>
  </div>
{% endblock %}

{% block content %}
{% load thumbnail %}

{% if user.is_authenticated %}
  <a href="{% url 'screening-update' screening.id %}" class="btn-sm btn-dark mb-5">Edit Screening</a>
  <a href="{% url 'screening-delete' screening.id %}" class="btn-sm btn-dark mb-5">Delete Screening</a>
{% endif %}

  <div class="col-10 mb-5">
    <h1 class="display-3 font-weight-bold">{{ screening.film }}</h1>
    <h4>{{ screening.subtitle }}</h4>
    <h4 class=""><a href="{% url 'venue-detail' screening.venue.slug screening.venue.id %}">{{ screening.venue }}</a>, {{ screening.venue.city }}</h4>
    <h4>{{ screening.date }} {{ screening.start_time }} </h4>

    {% if screening.q_and_a %}
      <button class="btn-sm btn-secondary mt-2 mb-2">Q&A</button>
    {% endif %}

    {% if screening.season %}
    <p>Season: <a href="{% url 'season-detail' screening.season.slug screening.season.id %}">{{ screening.season }}</a></p>
    {% endif %}

    <div class="mt-2 mb-3">
      {% if screening.screening_passed %}
        <div class="alert alert-danger mt-2" role="alert">
          Sorry you missed it! This screening has already taken place.
        </div>
        {% else %}
        <a href="{{ screening.tickets }}" target="_blank" class="btn btn-primary">Buy Tickets</a>
      {% endif %}
    </div>

    <div class="social-icons">
      <h4>Share:</h4>
        <a target="_blank" href="https://twitter.com/intent/tweet?text={% url 'screening-detail' screening.id %} {{ screening.film }} showing at {{ screening.venue }} on {{ screening.date }}"><i class="fab fa-twitter"></i></a>
        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={% url 'screening-detail' screening.id %} {{ screening.film }} showing at {{ screening.venue }} on {{ screening.date }}"><i class="fab fa-facebook-f"></i></a>
    </div>

<hr>

    <p><strong>Director:</strong> {{ screening.film.director }}<br>
    <strong>Cast:</strong> {{ screening.film.cast }}<br>
    <strong>Country:</strong> {{ screening.film.country }}<br>
    <strong>Year:</strong> {{ screening.film.year }}<br>
    <strong>Duration:</strong> {{ screening.film.length }} minutes<br>
    <strong>Certificate:</strong> {{ screening.film.certificate }}</p>

    <p>{{ screening.film.copy }}</p>

  </div>

<hr>

  <div class="mt-5">
      {% if screenings %}
      <h1 class="display-5">Related Screenings</h1>

      {% include "../includes/screening_loop.html" %}

    {% endif %}
  </div>

{% endblock content %}
