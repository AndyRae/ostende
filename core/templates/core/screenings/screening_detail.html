{% extends "core/base.html" %}
{% block title %}
  {{ screening.film }} - {{ screening.venue }}, {{ screening.venue.city }}
{% endblock title %}

{% block banner %}
  <div class="banner">
    <picture>
      <img src="{{ screening.film.image.url }}" alt="">
    </picture>
    <div class="banner-content container">

    </div>
  </div>
{% endblock %}

{% block content %}
{% load thumbnail %}

  <div class="col-10 mb-5">
    <h1 class="display-3 font-weight-bold">{{ screening.film }}</h1>
    <h4>{{ screening.subtitle }}</h4>
    <h4 class=""><a href="{% url 'venue-detail' screening.venue.slug screening.venue.id %}">{{ screening.venue }}</a>, {{ screening.venue.city }}</h4>
    <h4>{{ screening.date }} {{ screening.start_time }} </h4>

    {% if screening.q_and_a %}
      <button class="btn-sm btn-secondary mt-2 mb-2">Q&A</button>
    {% endif %}

    <p>Season: <a href="{% url 'season-detail' screening.season.slug screening.season.id %}">{{ screening.season }}</a></p>

    <div class="mt-2 mb-5">
      {% if screening.screening_passed %}
        <div class="alert alert-danger mt-2" role="alert">
          Sorry you missed it! This screening has already taken place.
        </div>
        {% else %}
        <a href="{{ screening.tickets }}" target="_blank" class="btn btn-primary">Buy Tickets</a>
      {% endif %}
    </div>

<hr>

    <p><strong>Director:</strong> {{ screening.film.director }}<br>
    <strong>Cast:</strong> {{ screening.film.cast }}<br>
    <strong>Country:</strong> {{ screening.film.country }}<br>
    <strong>Year:</strong> {{ screening.film.year }}<br>
    <strong>Duration:</strong> {{ screening.film.length }} minutes<br>
    <strong>Certificate:</strong> {{ screening.film.certificate }}</p>

    <p>{{ screening.film.copy }}</p>

  </div>

<hr>

  <div class="mt-5">
      {% if screenings %}
      <h1 class="display-5">Related Screenings</h1>

      <div class="row mt-5">

          {% for screening in screenings %}
          <div class="col-sm-4">
            <div class="card mb-4">
                  <a href="/screenings/{{screening.id}}/">
                    <img src="{{ screening.film.image|thumbnail_url:'cardThumb' }}" class="card-img-top">
                  </a>
                  <div class="card-body">
                    <div class="card-title h5"><a href="/screenings/{{screening.id}}/">{{ screening.film }}</a></div>
                    <div class="card-text">{{ screening.venue }}, {{ screening.venue.city }}</div>
                    <div class="card-text">{{ screening.date }} {{ screening.start_time }}</div>
                    <a href="{{ screening.tickets }}" target="_blank" class="btn btn-primary mt-3">Buy tickets</a>
                  </div>
            </div>
          </div>
          {% endfor %}
          
      </div>

    {% endif %}
  </div>

{% endblock content %}
