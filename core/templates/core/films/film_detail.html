{% extends "core/base.html" %}

{% block og:title %}{{ object.name }}{% endblock og:title %}
{% block twitter:title %}{{ object.name }}{% endblock twitter:title %}

{% block og:image %}{{ film.image.url }}{% endblock og:image %}
{% block twitter:image %}{{ film.image.url }}{% endblock twitter:image %}


{% block title %}
  {{ object.name }}
{% endblock title %}
{% load thumbnail %}

{% block banner %}
  <div class="jumbotron mt-5 banner" style="background-image: linear-gradient(#00000080, #0200007d), url({{ film.image.url }});">
    <h1 class="display-4 text-white mt-5 font-weight-bold banner-title">{{ object.name }}</h1>
  </div>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

{% if user.is_authenticated %}
  <a href="{% url 'film-update' film.slug film.id %}" class="btn-sm btn-dark mb-5">Edit Film</a>
  <a href="{% url 'film-delete' film.slug film.id %}" class="btn-sm btn-dark mb-5">Delete Film</a>
{% endif %}

  <div class="col-10 mb-5">
    <p><strong>Director:</strong> {{ object.director }}<br>
    <strong>Cast:</strong> {{ object.cast }}<br>
    <strong>Country:</strong> {{ object.country }}<br>
    <strong>Year:</strong> {{ object.year }}<br>
    <strong>Duration:</strong> {{ object.length }} minutes<br>
    <strong>Certificate:</strong> {{ object.certificate }}</p>

    {% if object.trailer %}
    <a data-fancybox href="{{ object.trailer }}" class="mb-3 btn btn-outline-secondary"><i class="fas fa-play-circle"></i> Trailer</a>
    {% endif %}

    <p>{{ object.copy }}</p>
  </div>

<hr>

  <div class="mt-5">
      {% if screenings %}
      <h1 class="display-5">Upcoming Screenings</h1>

      <div class="row mt-5">
        <table class="table col-sm-8 table-striped">
          <tbody>
          {% for screening in screenings %}
            <tr>
              <td><a href="/screenings/{{screening.id}}/">{{ screening.film }}</a></td>
              <td>{{ screening.venue }}, {{ screening.venue.city }}</td>
              <td>{{ screening.date }} {{ screening.start_time }}</td>
              <td><a href="{{ screening.tickets }}" target="_blank" class="btn btn-primary mt-3">Buy tickets</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
    {% endif %}
  </div>

  <div class="mt-5">
      {% if pastscreenings %}
      <h1 class="display-5">Past Screenings</h1>

      <div class="row mt-5">
        <table class="table table-striped col-sm-8">
          <tbody>
          {% for screening in pastscreenings %}
            <tr>
              <td><a href="/screenings/{{screening.id}}/">{{ screening.film }}</a></td>
              <td>{{ screening.venue }}, {{ screening.venue.city }}</td>
              <td>{{ screening.date }} {{ screening.start_time }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
    {% endif %}
  </div>

{% endblock content %}
